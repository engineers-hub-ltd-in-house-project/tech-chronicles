# 第10回ハンズオン：インデックス設計——データベースの「速さ」の正体

## 概要

100万行のテーブルを使い、インデックスなし/単一インデックス/複合インデックスの各パターンでクエリ速度を計測する。EXPLAIN ANALYZEの出力を読み解き、オプティマイザがインデックスをどう選択するかを体験する。カバリングインデックスによるIndex-Only Scanや、選択性に基づくオプティマイザの判断も観察する。

## 演習一覧

1. **インデックスなしの世界** — 100万行テーブルでフルテーブルスキャンの実行速度を計測する
2. **単一カラムインデックスの効果** — インデックス追加前後の速度差を確認する
3. **複合インデックスと最左一致の法則** — カラム順序によるインデックスの利用可否を体験する
4. **EXPLAIN ANALYZEを読み解く** — JOINを含むクエリの実行計画を一行ずつ解析する
5. **カバリングインデックスとIndex-Only Scan** — テーブルアクセスを完全に回避する技術を確認する
6. **選択性とオプティマイザの判断** — 選択性の高低によるインデックス使用可否の違いを観察する

## 動作環境

- Docker（PostgreSQL 17 公式イメージを使用）
- ターミナル

## セットアップ

```bash
bash setup.sh
```

## 手動で接続する場合

```bash
docker exec -it db-history-ep10-pg psql -U postgres -d handson
```

## 後片付け

```bash
docker rm -f db-history-ep10-pg
```
