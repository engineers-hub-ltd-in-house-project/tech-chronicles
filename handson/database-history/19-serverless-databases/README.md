# 第19回ハンズオン：NeonのサーバレスPostgreSQLを体験する

## 概要

NeonのサーバレスPostgreSQLを使い、サーバレスDBの核心的な機能を体験する。データベースブランチによるスキーマ変更の安全なテスト、Scale to Zeroの動作確認、コネクションプーリングの効果を確認する。

## 演習一覧

| 演習  | 内容                             | 学べること                             |
| ----- | -------------------------------- | -------------------------------------- |
| 演習1 | Neonプロジェクト作成と接続       | サーバレスPostgreSQLへの接続と基本操作 |
| 演習2 | ブランチによるスキーマ変更テスト | Copy-on-Writeブランチの独立性と安全性  |
| 演習3 | Scale to Zeroの観察              | コンピュート停止と自動再起動の挙動     |
| 演習4 | コネクションプーリングの比較     | PgBouncer経由接続の効果                |

## 動作環境

- Neonアカウント（無料Freeプランで利用可能）
- Node.js 18以降（neonctl CLIのインストールに必要）
- psql（PostgreSQLクライアント）
- ネットワーク: インターネット接続が必要

## セットアップ

```bash
bash setup.sh
```

## 後片付け

```bash
# ブランチの削除
neonctl branches delete feature-discount

# プロジェクトの削除（必要に応じて）
neonctl projects delete serverless-handson
```

## 注意事項

- Neonの無料Freeプランには制限がある（コンピュート時間、ストレージ容量等）。最新の制限は公式サイトで確認すること
- ハンズオンではNeonのクラウドサービスを使用するため、インターネット接続が必須
- 接続文字列にはパスワードが含まれる。コードにハードコードせず、環境変数で管理すること
- Scale to Zeroのテストにはデフォルトで5分の待機が必要
