# ハンズオン：cgroupsとnamespaceで簡易マルチテナント環境を構築する

**クラウドの考古学 第12回「マルチテナント設計——クラウドの核心イノベーション」対応**

## 概要

Linuxのcgroupsとnamespacesを使って簡易的なマルチテナント環境を構築し、リソース隔離とNoisy Neighbor問題を体験する。

## 演習一覧

| # | 演習内容                     | 学べること                       |
| - | ---------------------------- | -------------------------------- |
| 1 | namespacesによるプロセス隔離 | PID名前空間によるプロセスの分離  |
| 2 | cgroupsによるリソース制限    | cpu.maxとmemory.maxの設定        |
| 3 | Noisy Neighborの再現         | CPU負荷の干渉とcgroupsによる緩和 |
| 4 | メモリ制限とOOMキラー        | テナント間のメモリ隔離           |
| 5 | ネットワーク名前空間         | テナント間のネットワーク分離     |

## 動作環境

- Docker（Ubuntu 24.04ベースコンテナ、特権モード）
- Linux cgroups v2対応カーネル

## セットアップ

```bash
bash setup.sh
```

## 注意事項

- 特権モード（`--privileged`）でDockerコンテナを起動する必要がある
- cgroups v2が有効なホスト環境が必要
- 演習3のstress-ngによる負荷テストはCPUを消費するため、他の作業に影響する可能性がある

## ライセンス

MIT
